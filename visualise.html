<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scatter Plot with RGB Axes</title>
  <script src="js/plotly-latest.min.js"></script>
</head>
<body>

<div id="myDiv"></div>
<p>Colour selected:</p>
<div id="coordsDisplay""></div>
<div id="closestVectors"></div>

<script>
  // Data for the Plotly 3D graph

  var x1 = [255, 128, 64, 200, 50];    // Red values
  var y1 = [0, 128, 255, 100, 200];    // Green values
  var z1 = [255, 0, 128, 255, 100];    // Blue values


  var vectors = x1.map(function(x, i) {
  return [x, y1[i], z1[i]];
});


  var colors = x1.map(function(x, i) {
  return `rgb(${x}, ${y1[i]}, ${z1[i]})`; // Combine x, y, z values to form RGB string
});


  var data = [{
      x: x1,
      y: y1,
      z: z1,
      mode: 'markers',
      type: 'scatter3d',
      marker: {
    size: 10,
    color: colors  // Use the dynamically generated RGB colors
  }
  }];

  var colors = x1.map(function(x, i) {
  return `rgb(${x}, ${y1[i]}, ${z1[i]})`; // Combine x, y, z values to form RGB string
});

  // Layout for the 3D graph
  var layout = {
      title: '3D Scatter Plot',
      scene: {
          xaxis: { title: 'Red' },
          yaxis: { title: 'Green' },
          zaxis: { title: 'Blue' }
      }
  };

  var layout = {
    title: 'Scatter Plot with RGB Axes',
    scene: {
      xaxis: {
        title: 'Red',
        range: [0, 255]             // Set the range for Red axis
      },
      yaxis: {
        title: 'Green',
        range: [0, 255]             // Set the range for Green axis
      },
      zaxis: {
        title: 'Blue',
        range: [0, 255]             // Set the range for Blue axis
      }
    },
    margin: {
    l: 50,   // left
    r: 50,   // right
    b: 50,   // bottom
    t: 50    // top
  }
  }
  // Create the graph in the div with id "plotly-graph"
  Plotly.newPlot('myDiv', data, layout);

  var myPlot = document.getElementById('myDiv');
  myPlot.on('plotly_click', function(data){
    var point = data.points[0];  // the clicked point
    var x = point.x;
    var y = point.y;
    var z = point.z;

    document.getElementById('coordsDisplay').innerHTML = 
      ` Colour name: exmaple <br> (Red: ${x}, Green: ${y}, Blue: ${z})`;
      
  var clickedVector = [x, y, z];
  var closest = findClosestVectors(vectors, clickedVector);

  document.getElementById('closestVectors').innerHTML = 
    `${closest.map(vec => `(${vec[0]}, ${vec[1]}, ${vec[2]})`).join('<br>')}`;
  });

  function findClosestVectors(vectors, target, count = 5) {
  // Calculate distances
  var distances = vectors.map(function(vec) {
    var dx = vec[0] - target[0];
    var dy = vec[1] - target[1];
    var dz = vec[2] - target[2];
    var distance = Math.sqrt(dx * dx + dy * dy + dz * dz);
    return { vector: vec, distance: distance };
  });

  // Sort by distance
  distances.sort(function(a, b) {
    return a.distance - b.distance;
  });

  // Return the 'count' closest vectors
  return distances.slice(0, count).map(function(item) {
    return item.vector;
  });
}


</script>


</body>
</html>

